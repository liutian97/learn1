{"version":3,"file":"js/Users_Rights_Roles.8bb35f77.js","mappings":"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","sources":["webpack://vue_shop/./src/components/power/Rights.vue?d763","webpack://vue_shop/src/components/power/Rights.vue","webpack://vue_shop/./src/components/power/Rights.vue?249c","webpack://vue_shop/./src/components/power/Rights.vue","webpack://vue_shop/./src/components/power/Roles.vue?4d2e","webpack://vue_shop/src/components/power/Roles.vue","webpack://vue_shop/./src/components/power/Roles.vue?942a","webpack://vue_shop/./src/components/power/Roles.vue","webpack://vue_shop/./src/components/user/Users.vue?af1c","webpack://vue_shop/src/components/user/Users.vue","webpack://vue_shop/./src/components/user/Users.vue?4b7b","webpack://vue_shop/./src/components/user/Users.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/home' }}},[_vm._v(\"首页\")]),_c('el-breadcrumb-item',[_vm._v(\"权限管理\")]),_c('el-breadcrumb-item',[_vm._v(\"权限列表\")])],1),_c('el-card',[_c('el-table',{attrs:{\"data\":_vm.rightsList,\"border\":\"\",\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"label\":\"#\"}}),_c('el-table-column',{attrs:{\"prop\":\"authName\",\"label\":\"权限名称\"}}),_c('el-table-column',{attrs:{\"prop\":\"path\",\"label\":\"路径\"}}),_c('el-table-column',{attrs:{\"prop\":\"level\",\"label\":\"权限等级\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.level === '0')?_c('el-tag',[_vm._v(\"一级\")]):(scope.row.level === '1')?_c('el-tag',{attrs:{\"type\":\"success\"}},[_vm._v(\"二级\")]):_c('el-tag',{attrs:{\"type\":\"warning\"}},[_vm._v(\"三级\")])]}}])})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<div>\r\n\t\t<!-- 面包屑导航区域 -->\r\n\t\t<el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n\t\t\t<el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\r\n\t\t\t<el-breadcrumb-item>权限管理</el-breadcrumb-item>\r\n\t\t\t<el-breadcrumb-item>权限列表</el-breadcrumb-item>\r\n\t\t</el-breadcrumb>\r\n\r\n\t\t<!-- 卡片视图区域 -->\r\n\t\t<el-card>\r\n\t\t\t<el-table :data=\"rightsList\" border stripe>\r\n      <el-table-column type=\"index\" label=\"#\"></el-table-column>\r\n      <el-table-column prop=\"authName\" label=\"权限名称\"></el-table-column>\r\n      <el-table-column prop=\"path\" label=\"路径\"></el-table-column>\r\n      <el-table-column prop=\"level\" label=\"权限等级\">\r\n        <!-- 使用 作用域插槽 接收scope，scope.row 是这一行的数据 -->\r\n        <template slot-scope=\"scope\">\r\n          <el-tag v-if=\"scope.row.level === '0'\">一级</el-tag>\r\n          <el-tag type=\"success\" v-else-if=\"scope.row.level === '1'\">二级</el-tag>\r\n          <el-tag type=\"warning\" v-else>三级</el-tag>\r\n        </template>\r\n      </el-table-column>\r\n      </el-table>\r\n\t\t</el-card>\r\n\t</div>\r\n\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tdata () {\r\n\t\t\treturn {\r\n\t\t\t\t// 权限列表 \r\n\t\t\t\trightsList: []\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tcreated () {\r\n\t\t\t// 获取所有的权限\r\n\t\t\tthis.getRightsList()\r\n\t\t},\r\n\r\n\t\tmethods: {\r\n\t\t\t// 调用API获取权限列表的数据\r\n\t\t\tasync getRightsList () {\r\n\t\t\t\tconst { data: res } = await this.$http.get('rights/list')\r\n\t\t\t\tif (res.meta.status !== 200) {\r\n\t\t\t\t\treturn this.$message.error('获取用户权限失败！')\r\n\t\t\t\t}\r\n\t\t\t\tthis.rightsList = res.data\r\n\t\t\t\tconsole.log(this.rightsList)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\r\n\r\n\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Rights.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Rights.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Rights.vue?vue&type=template&id=7c934ec1&scoped=true&\"\nimport script from \"./Rights.vue?vue&type=script&lang=js&\"\nexport * from \"./Rights.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7c934ec1\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/home' }}},[_vm._v(\"首页\")]),_c('el-breadcrumb-item',[_vm._v(\"权限管理\")]),_c('el-breadcrumb-item',[_vm._v(\"角色列表\")])],1),_c('el-card',[_c('el-row',[_c('el-col',[_c('el-button',{attrs:{\"type\":\"primary\"}},[_vm._v(\"添加角色\")])],1)],1),_c('el-table',{attrs:{\"data\":_vm.rolelist,\"border\":\"\",\"stripe\":\"\",\"row-key\":\"id\"}},[_c('el-table-column',{attrs:{\"type\":\"expand\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return _vm._l((scope.row.children),function(item1,i1){return _c('el-row',{key:item1.id,class:['bdbottom', i1 === 0 ? 'bdtop' : '', 'vcenter']},[_c('el-col',{attrs:{\"span\":5}},[_c('el-tag',{attrs:{\"closable\":\"\"},on:{\"close\":function($event){return _vm.removeRightById(scope.row, item1.id)}}},[_vm._v(_vm._s(item1.authName))]),_c('i',{staticClass:\"el-icon-caret-right\"})],1),_c('el-col',{attrs:{\"span\":19}},_vm._l((item1.children),function(item2,i2){return _c('el-row',{key:item2.id,class:[i2 === 0 ? '' : 'bdtop', 'vcenter']},[_c('el-col',{attrs:{\"span\":6}},[_c('el-tag',{attrs:{\"type\":\"success\",\"closable\":\"\"},on:{\"close\":function($event){return _vm.removeRightById(scope.row, item2.id)}}},[_vm._v(_vm._s(item2.authName))]),_c('i',{staticClass:\"el-icon-caret-right\"})],1),_c('el-col',{attrs:{\"span\":13}},_vm._l((item2.children),function(item3){return _c('el-tag',{key:item3.id,attrs:{\"type\":\"warning\",\"closable\":\"\"},on:{\"close\":function($event){return _vm.removeRightById(scope.row, item3.id)}}},[_vm._v(_vm._s(item3.authName))])}),1)],1)}),1)],1)})}}])}),_c('el-table-column',{attrs:{\"type\":\"index\",\"label\":\"#\"}}),_c('el-table-column',{attrs:{\"prop\":\"roleName\",\"label\":\"角色名称\"}}),_c('el-table-column',{attrs:{\"prop\":\"roleDesc\",\"label\":\"角色描述\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"300px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-edit\",\"size\":\"mini\"}},[_vm._v(\"编辑\")]),_c('el-button',{attrs:{\"type\":\"danger\",\"icon\":\"el-icon-delete\",\"size\":\"mini\"}},[_vm._v(\"删除\")]),_c('el-button',{attrs:{\"type\":\"warning\",\"icon\":\"el-icon-setting\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.showSetRightDialog(scope.row)}}},[_vm._v(\"分配权限\")])]}}])})],1)],1),_c('el-dialog',{attrs:{\"title\":\"分配权限\",\"visible\":_vm.setRightDialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.setRightDialogVisible=$event},\"close\":_vm.setRightDialogClosed}},[_c('el-tree',{ref:\"treeRef\",attrs:{\"data\":_vm.rightslist,\"props\":_vm.treeProps,\"show-checkbox\":\"\",\"node-key\":\"id\",\"default-expand-all\":\"\",\"default-checked-keys\":_vm.defKeys}}),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.setRightDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.allotRights}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<div>\r\n\t\t<!-- 面包屑导航区域 -->\r\n\t\t<el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n\t\t\t<el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\r\n\t\t\t<el-breadcrumb-item>权限管理</el-breadcrumb-item>\r\n\t\t\t<el-breadcrumb-item>角色列表</el-breadcrumb-item>\r\n\t\t</el-breadcrumb>\r\n\r\n\t\t<!-- 卡片视图区域 -->\r\n\t\t<el-card>\r\n\t\t\t<!-- 添加角色列表区域 -->\r\n\t\t\t<el-row>\r\n\t\t\t\t<el-col>\r\n\t\t\t\t\t<el-button type=\"primary\">添加角色</el-button>\r\n\t\t\t\t</el-col>\r\n\t\t\t</el-row>\r\n\r\n\t\t\t<!-- 角色列表区域 -->\r\n\t\t\t<el-table :data=\"rolelist\" border stripe row-key=\"id\">\r\n\t\t\t\t<!-- 展开列   如果设置了 expand 则显示为一个可展开的按钮 -->\r\n\t\t\t\t<el-table-column type=\"expand\">\r\n\t\t\t\t\t<!-- 使用作用域插槽来渲染权限列表 -->\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<!-- 上边框线动态添加，索引i1为0，添加上边框线，不为0，不添加 -->\r\n\t\t\t\t\t\t<el-row :class=\"['bdbottom', i1 === 0 ? 'bdtop' : '', 'vcenter']\" v-for=\"(item1, i1) in scope.row.children\" :key=\"item1.id\">\r\n\t\t\t\t\t\t\t<!-- 渲染一级权限 -->\r\n\t\t\t\t\t\t\t<el-col :span=\"5\">\r\n\t\t\t\t\t\t\t\t<el-tag closable @close=\"removeRightById(scope.row, item1.id)\">{{item1.authName}}</el-tag>\r\n\t\t\t\t\t\t\t\t<i class=\"el-icon-caret-right\"></i>\r\n\t\t\t\t\t\t\t</el-col>\r\n\t\t\t\t\t\t\t<!-- 渲染二级和三级权限 -->\r\n\t\t\t\t\t\t\t<el-col :span=\"19\">\r\n\t\t\t\t\t\t\t\t<!-- 通过for循环嵌套渲染二级权限 -->\r\n\t\t\t\t\t\t\t\t<el-row :class=\"[i2 === 0 ? '' : 'bdtop', 'vcenter']\" v-for=\"(item2, i2) in item1.children\" :key=\"item2.id\">\r\n\t\t\t\t\t\t\t\t\t<el-col :span=\"6\">\r\n\t\t\t\t\t\t\t\t\t\t<el-tag type=\"success\" closable @close=\"removeRightById(scope.row, item2.id)\">{{item2.authName}}</el-tag>\r\n\t\t\t\t\t\t\t\t\t\t<i class=\"el-icon-caret-right\"></i>\r\n\t\t\t\t\t\t\t\t\t</el-col>\r\n\t\t\t\t\t\t\t\t\t<!-- 通过for循环嵌套渲染三级权限 -->\r\n\t\t\t\t\t\t\t\t\t<!-- closable\t是否可关闭 -->\r\n\t\t\t\t\t\t\t\t\t<!-- close\t关闭 Tag 时触发的事件 -->\r\n\t\t\t\t\t\t\t\t\t<!-- removeRightById(scope.row, items.id), scope.row 是角色id，items.id 是权限id -->\r\n\t\t\t\t\t\t\t\t\t<el-col :span=\"13\">\r\n\t\t\t\t\t\t\t\t\t\t<el-tag v-for=\"item3 in item2.children\" :key=\"item3.id\" type=\"warning\" closable @close=\"removeRightById(scope.row, item3.id)\">{{item3.authName}}</el-tag>\r\n\t\t\t\t\t\t\t\t\t</el-col>\r\n\t\t\t\t\t\t\t\t</el-row>\r\n\t\t\t\t\t\t\t</el-col>\r\n\t\t\t\t\t\t</el-row>\r\n\t\t\t\t\t\t<!-- <pre>\r\n              {{scope.row}}\r\n            </pre> -->\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<!-- 索引列 -->\r\n\t\t\t\t<el-table-column type=\"index\" label=\"#\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"roleName\" label=\"角色名称\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"roleDesc\" label=\"角色描述\"></el-table-column>\r\n\t\t\t\t<el-table-column label=\"操作\" width=\"300px\">\r\n\t\t\t\t\t<!-- 通过作用域插槽渲染操作列 -->\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<!-- 修改按钮 -->\r\n\t\t\t\t\t\t<el-button type=\"primary\" icon=\"el-icon-edit\" size=\"mini\">编辑</el-button>\r\n\t\t\t\t\t\t<!-- 删除按钮 -->\r\n\t\t\t\t\t\t<el-button type=\"danger\" icon=\"el-icon-delete\" size=\"mini\">删除</el-button>\r\n\t\t\t\t\t\t<!-- 分配权限按钮  showSetRightDialog(scope.row) 参数scope.row 传入到递归获取三级节点的Id的递归函数中-->\r\n\t\t\t\t\t\t<el-button type=\"warning\" icon=\"el-icon-setting\" size=\"mini\" @click=\"showSetRightDialog(scope.row)\">分配权限</el-button>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t</el-table>\r\n\r\n\t\t</el-card>\r\n\r\n\t\t<!-- 分配权限的对话框 -->\r\n\t\t<el-dialog title=\"分配权限\" :visible.sync=\"setRightDialogVisible\" width=\"50%\" @close=\"setRightDialogClosed\">\r\n\t\t\t<!-- 树形控件 -->\r\n\t\t\t<!-- show-checkbox\t节点是否可被选择 -->\r\n\t\t\t<!-- node-key\t每个树节点用来作为唯一标识的属性，整棵树应该是唯一的 -->\r\n\t\t\t<!-- default-expand-all\t是否默认展开所有节点 -->\r\n\t\t\t<!-- default-checked-keys\t默认勾选的节点的 key 的数组 -->\r\n\t\t\t<el-tree :data=\"rightslist\" :props=\"treeProps\" show-checkbox node-key=\"id\" default-expand-all :default-checked-keys=\"defKeys\" ref=\"treeRef\"></el-tree>\r\n\t\t\t<span slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t<el-button @click=\"setRightDialogVisible = false\">取 消</el-button>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"allotRights\">确 定</el-button>\r\n\t\t\t</span>\r\n\t\t</el-dialog>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tdata () {\r\n\t\t\treturn {\r\n\t\t\t\t// 所有角色列表数据\r\n\t\t\t\trolelist: [],\r\n\t\t\t\t// 控制分配权限对话框的显示与隐藏\r\n\t\t\t\tsetRightDialogVisible: false,   // el-dialog 标签 对应的属性值，需要在数据里定义\r\n\t\t\t\t// 所有权限的数据\r\n\t\t\t\trightslist: [],\r\n\t\t\t\t// 树形控件的属性绑定对象\r\n\t\t\t\ttreeProps: {\r\n\t\t\t\t\tlabel: 'authName',\r\n\t\t\t\t\tchildren: 'children'\r\n\t\t\t\t},\r\n\t\t\t\t// 默认选中的节点Id值数组\r\n\t\t\t\tdefKeys: [],\r\n\t\t\t\t// 当前即将分配权限的角色id\r\n\t\t\t\troleId: ''\r\n\r\n\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// 生命周期函数 \r\n\t\tcreated () {\r\n\t\t\tthis.getRolesList()\r\n\t\t},\r\n\r\n\t\tmethods: {\r\n\t\t\t// 获取所有角色的列表\r\n\t\t\tasync getRolesList () {\r\n\t\t\t\tconst { data: res } = await this.$http.get('roles')\r\n\t\t\t\tif (res.meta.status !== 200) {\r\n\t\t\t\t\treturn this.$message.error('获取角色列表失败！')\r\n\t\t\t\t}\r\n\t\t\t\tthis.rolelist = res.data  // 把后台获取的数据保存在定义的数据中\r\n\t\t\t\tconsole.log(this.rolelist)\r\n\t\t\t},\r\n\r\n\r\n\t\t\t// 根据Id删除对应的权限\r\n\t\t\tasync removeRightById (role, rightId) {    // role 是包含角色id，rightId 是权限id\r\n\t\t\t\t// 弹框询问用户是否要删除\r\n\t\t\t\tconst confirmResult = await this.$confirm('此操作将永久删除该角色, 是否继续?', '提示', {\r\n\t\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t}).catch(err => err)\r\n\r\n\t\t\t\tif (confirmResult !== 'confirm') {\r\n\t\t\t\t\treturn this.$message.info('取消了删除')\r\n\t\t\t\t}\r\n\t\t\t\t// 删除角色指定权限    roles/:roleId/rights/:rightId\r\n\t\t\t\tconst { data: res } = await this.$http.delete(`roles/${role.id}/rights/${rightId}`)\r\n\t\t\t\tif (res.meta.status !== 200) {\r\n\t\t\t\t\treturn this.$message.error('删除权限失败！')\r\n\t\t\t\t}\r\n\t\t\t\t// 提高用户体验，不要直接刷新角色列表\r\n\t\t\t\t// this.getRolesList()\r\n\t\t\t\trole.children = res.data  // 服务器返回的data, 是当前角色下最新的权限数据\r\n\t\t\t},\r\n\r\n\r\n\t\t\t// 展示分配权限的对话框   rights/:type\r\n\t\t\tasync showSetRightDialog (role) {\r\n\t\t\t\tthis.roleId = role.id\r\n\t\t\t\t// 获取所有权限的数据\r\n\t\t\t\tconst { data: res } = await this.$http.get('rights/tree')\r\n\t\t\t\tif (res.meta.status !== 200) {\r\n\t\t\t\t\treturn this.$message.error('获取权限列表失败！')\r\n\t\t\t\t}\r\n\t\t\t\t// 把获取到的权限数据保存到 data 中\r\n\t\t\t\tthis.rightslist = res.data\r\n\t\t\t\tconsole.log(this.rightslist);\r\n\r\n\t\t\t\t// 递归获取三级节点的Id  （点击按钮的showSetRightDialog函数里的scope.row会传入role）\r\n\t\t\t\tthis.getLeafKeys(role, this.defKeys)\r\n\r\n\t\t\t\t// 显示点击“分配权限”显示对话框\r\n\t\t\t\tthis.setRightDialogVisible = true;\r\n\t\t\t},\r\n\r\n\t\t\t// 定义递归函数，通过递归的形式，获取角色下所有三级权限的id，并保存到 defKeys 数组中\r\n\t\t\t// node 判断是否为三级节点， arr 数组进行保存\r\n\t\t\tgetLeafKeys (node, arr) {\r\n\t\t\t\t// 如果当前 node 节点不包含 children 属性，则是三级节点\r\n\t\t\t\tif (!node.children) {\r\n\t\t\t\t\treturn arr.push(node.id)\r\n\t\t\t\t}\r\n\t\t\t\t// 如果不是三级节点，进一步进行递归获取三级节点\r\n\t\t\t\tnode.children.forEach(item =>\r\n\t\t\t\t\tthis.getLeafKeys(item, arr)\r\n\t\t\t\t)\r\n\t\t\t},\r\n\r\n\t\t\t// 监听分配权限对话框的关闭事件\r\n\t\t\tsetRightDialogClosed () {\r\n\t\t\t\tthis.defKeys = []  // 每次点完“分配权限”按钮后，清空默认选中的节点Id值数组\r\n\t\t\t},\r\n\r\n\r\n\t\t\t// 点击为角色分配权限\r\n\t\t\tasync allotRights () {\r\n\t\t\t\t// 获取所有选中节点的id\r\n\t\t\t\t// ... 扩展运算符\r\n\t\t\t\tconst keys = [\r\n\t\t\t\t\t...this.$refs.treeRef.getCheckedKeys(),  // 全选节点的 key 所组成的数组\r\n\t\t\t\t\t...this.$refs.treeRef.getCheckedKeys()\t// 半选节点的 key 所组成的数组\r\n\t\t\t\t]\r\n\t\t\t\t// 把数组进行拼接成字符串发起请求\r\n\t\t\t\tconst idStr = keys.join(',')\r\n\r\n\t\t\t\tconst { data: res } = await this.$http.post(`roles/${this.roleId}/rights`, { rids: idStr })\r\n\t\t\t\tif (res.meta.status !== 200) {\r\n\t\t\t\t\treturn this.$message.error('分配权限失败！')\r\n\t\t\t\t}\r\n\t\t\t\tthis.$message.success(\"分配权限成功！\")\r\n\t\t\t\tthis.getRolesList()\r\n\t\t\t\tthis.setRightDialogVisible = false\r\n\t\t\t},\r\n\r\n\r\n\r\n\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n\t.el-tag {\r\n\t\tmargin: 7px;\r\n\t}\r\n\r\n\t.bdtop {\r\n\t\tborder-top: 1px solid #eee;\r\n\t}\r\n\r\n\t.bdbottom {\r\n\t\tborder-bottom: 1px solid #eee;\r\n\t}\r\n\r\n\t// 三级权限的样式\r\n\t.vcenter {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center; // 侧轴元素的排列方式：纵轴居中对齐\r\n\t}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Roles.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Roles.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Roles.vue?vue&type=template&id=17d1ad28&scoped=true&\"\nimport script from \"./Roles.vue?vue&type=script&lang=js&\"\nexport * from \"./Roles.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Roles.vue?vue&type=style&index=0&id=17d1ad28&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"17d1ad28\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/home' }}},[_vm._v(\"首页\")]),_c('el-breadcrumb-item',[_vm._v(\"用户管理\")]),_c('el-breadcrumb-item',[_vm._v(\"用户列表\")])],1),_c('el-card',[_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":8}},[_c('el-input',{attrs:{\"placeholder\":\"请输入内容\",\"clearable\":\"\"},on:{\"clear\":_vm.getUserList},model:{value:(_vm.queryInfo.query),callback:function ($$v) {_vm.$set(_vm.queryInfo, \"query\", $$v)},expression:\"queryInfo.query\"}},[_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.getUserList},slot:\"append\"})],1)],1),_c('el-col',{attrs:{\"span\":4}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.addDialogVisible = true}}},[_vm._v(\"添加用户\")])],1)],1),_c('el-table',{attrs:{\"data\":_vm.userlist,\"border\":\"\",\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"label\":\"#\"}}),_c('el-table-column',{attrs:{\"prop\":\"username\",\"label\":\"姓名\"}}),_c('el-table-column',{attrs:{\"prop\":\"email\",\"label\":\"邮箱\"}}),_c('el-table-column',{attrs:{\"prop\":\"mobile\",\"label\":\"电话\"}}),_c('el-table-column',{attrs:{\"prop\":\"role_name\",\"label\":\"角色\"}}),_c('el-table-column',{attrs:{\"label\":\"状态\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-switch',{on:{\"change\":function($event){return _vm.userStateChanged(scope.row)}},model:{value:(scope.row.mg_state),callback:function ($$v) {_vm.$set(scope.row, \"mg_state\", $$v)},expression:\"scope.row.mg_state\"}})]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-edit\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.showEditDialog(scope.row.id)}}}),_c('el-button',{attrs:{\"type\":\"danger\",\"icon\":\"el-icon-delete\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.removeUserById(scope.row.id)}}}),_c('el-tooltip',{attrs:{\"content\":\"分配角色\",\"placement\":\"top\",\"enterable\":false}},[_c('el-button',{attrs:{\"type\":\"warning\",\"icon\":\"el-icon-setting\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.setRole(scope.row)}}})],1)]}}])})],1),_c('el-pagination',{attrs:{\"current-page\":_vm.queryInfo.pagenum,\"page-sizes\":[1, 2, 5, 10],\"page-size\":_vm.queryInfo.pagesize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1),_c('el-dialog',{attrs:{\"title\":\"提示\",\"visible\":_vm.addDialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.addDialogVisible=$event},\"close\":_vm.addDialogClosed}},[_c('el-form',{ref:\"addFormRef\",attrs:{\"model\":_vm.addForm,\"rules\":_vm.addFormRules,\"label-width\":\"70px\"}},[_c('el-form-item',{attrs:{\"label\":\"用户名\",\"prop\":\"username\"}},[_c('el-input',{model:{value:(_vm.addForm.username),callback:function ($$v) {_vm.$set(_vm.addForm, \"username\", $$v)},expression:\"addForm.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"密码\",\"prop\":\"password\"}},[_c('el-input',{model:{value:(_vm.addForm.password),callback:function ($$v) {_vm.$set(_vm.addForm, \"password\", $$v)},expression:\"addForm.password\"}})],1),_c('el-form-item',{attrs:{\"label\":\"邮箱\",\"prop\":\"email\"}},[_c('el-input',{model:{value:(_vm.addForm.email),callback:function ($$v) {_vm.$set(_vm.addForm, \"email\", $$v)},expression:\"addForm.email\"}})],1),_c('el-form-item',{attrs:{\"label\":\"手机\",\"prop\":\"mobile\"}},[_c('el-input',{model:{value:(_vm.addForm.mobile),callback:function ($$v) {_vm.$set(_vm.addForm, \"mobile\", $$v)},expression:\"addForm.mobile\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.addDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addUser}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"修改用户信息\",\"visible\":_vm.editDialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.editDialogVisible=$event},\"click\":_vm.editDialogClosed}},[_c('el-form',{ref:\"editFormRef\",attrs:{\"model\":_vm.editForm,\"rules\":_vm.editFormRules,\"label-width\":\"70px\"}},[_c('el-form-item',{attrs:{\"label\":\"用户名\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.editForm.username),callback:function ($$v) {_vm.$set(_vm.editForm, \"username\", $$v)},expression:\"editForm.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"邮箱\",\"prop\":\"email\"}},[_c('el-input',{model:{value:(_vm.editForm.email),callback:function ($$v) {_vm.$set(_vm.editForm, \"email\", $$v)},expression:\"editForm.email\"}})],1),_c('el-form-item',{attrs:{\"label\":\"手机\",\"prop\":\"mobile\"}},[_c('el-input',{model:{value:(_vm.editForm.mobile),callback:function ($$v) {_vm.$set(_vm.editForm, \"mobile\", $$v)},expression:\"editForm.mobile\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.editDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.editUserInfo}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"分配角色\",\"visible\":_vm.setRoleDialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.setRoleDialogVisible=$event},\"close\":_vm.setRoleDialogClosed}},[_c('div',[_c('p',[_vm._v(\"当前的用户：\"+_vm._s(_vm.userInfo.username))]),_c('p',[_vm._v(\"当前的角色：\"+_vm._s(_vm.userInfo.role_name))]),_c('p',[_vm._v(\"分配新角色： \"),_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.selectedRoleId),callback:function ($$v) {_vm.selectedRoleId=$$v},expression:\"selectedRoleId\"}},_vm._l((_vm.rolesList),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.roleName,\"value\":item.id}})}),1)],1)]),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.setRoleDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.saveRoleInfo}},[_vm._v(\"确 定\")])],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<div>\r\n\t\t<!-- 面包屑导航区域 -->\r\n\t\t<el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n\t\t\t<el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\r\n\t\t\t<el-breadcrumb-item>用户管理</el-breadcrumb-item>\r\n\t\t\t<el-breadcrumb-item>用户列表</el-breadcrumb-item>\r\n\t\t</el-breadcrumb>\r\n\r\n\t\t<!-- 卡片视图区域 -->\r\n\t\t<el-card>\r\n\t\t\t<!-- 搜索与添加区域 -->\r\n\t\t\t<el-row :gutter=\"20\">\r\n\t\t\t\t<el-col :span=\"8\">\r\n\t\t\t\t\t<!-- 实现搜索功能 数据的双向绑定,搜索按钮绑定单击事件（更新用户列表函数）-->\r\n\t\t\t\t\t<!-- 使用clearable属性即可得到一个可清空的输入框 -->\r\n\t\t\t\t\t<!-- clear\t在点击由 clearable 属性生成的清空按钮时触发 -->\r\n\t\t\t\t\t<el-input placeholder=\"请输入内容\" v-model=\"queryInfo.query\" clearable @clear=\"getUserList\">\r\n\t\t\t\t\t\t<el-button slot=\"append\" icon=\"el-icon-search\" @click=\"getUserList\"></el-button>\r\n\t\t\t\t\t</el-input>\r\n\t\t\t\t</el-col>\r\n\t\t\t\t<el-col :span=\"4\">\r\n\t\t\t\t\t<el-button type=\"primary\" @click=\"addDialogVisible = true\">添加用户</el-button>\r\n\t\t\t\t</el-col>\r\n\t\t\t</el-row>\r\n\r\n\t\t\t<!-- 用户列表区域 -->\r\n\t\t\t<el-table :data=\"userlist\" border stripe>\r\n\t\t\t\t<!-- 添加索引列 ： type=\"index\"-->\r\n\t\t\t\t<el-table-column type=\"index\" label=\"#\"> </el-table-column>\r\n\t\t\t\t<el-table-column prop=\"username\" label=\"姓名\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"email\" label=\"邮箱\"> </el-table-column>\r\n\t\t\t\t<el-table-column prop=\"mobile\" label=\"电话\"> </el-table-column>\r\n\t\t\t\t<el-table-column prop=\"role_name\" label=\"角色\"> </el-table-column>\r\n\t\t\t\t<el-table-column label=\"状态\">\r\n\t\t\t\t\t<!-- mg_state 属性 是布尔值，布尔值不能直接渲染在页面，要将其渲染成开关的状态并显示 -->\r\n\t\t\t\t\t<!-- 使用 作用域插槽 接收scope，scope.row 是这一行的数据 -->\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<el-switch v-model=\"scope.row.mg_state\" @change=\"userStateChanged(scope.row)\"></el-switch>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column label=\"操作\" width=\"180\">\r\n\t\t\t\t\t<!-- 通过作用域插槽渲染操作列 -->\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<!-- 修改按钮 -->\r\n\t\t\t\t\t\t<el-button type=\"primary\" icon=\"el-icon-edit\" size=\"mini\" @click=\"showEditDialog(scope.row.id)\"></el-button>\r\n\t\t\t\t\t\t<!-- 删除按钮 -->\r\n\t\t\t\t\t\t<el-button type=\"danger\" icon=\"el-icon-delete\" size=\"mini\" @click=\"removeUserById(scope.row.id)\"></el-button>\r\n\t\t\t\t\t\t<!-- 分配角色按钮 enterable\t鼠标是否可进入到 tooltip 中 -->\r\n\t\t\t\t\t\t<el-tooltip content=\"分配角色\" placement=\"top\" :enterable=\"false\">\r\n\t\t\t\t\t\t\t<el-button type=\"warning\" icon=\"el-icon-setting\" size=\"mini\" @click=\"setRole(scope.row)\"></el-button>\r\n\t\t\t\t\t\t</el-tooltip>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t</el-table>\r\n\r\n\t\t\t<!-- 分页区域 -->\r\n\t\t\t<el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\" :current-page=\"queryInfo.pagenum\" :page-sizes=\"[1, 2, 5, 10]\" :page-size=\"queryInfo.pagesize\" layout=\"total, sizes, prev, pager, next, jumper\" :total=\"total\">\r\n\t\t\t</el-pagination>\r\n\t\t</el-card>\r\n\r\n\t\t<!-- 添加用户的对话框 -->\r\n\t\t<!-- close事件\tDialog 关闭的回调 -->\r\n\t\t<el-dialog title=\"提示\" :visible.sync=\"addDialogVisible\" width=\"50%\" @close=\"addDialogClosed\">\r\n\r\n\t\t\t<!-- 内容主体区域 -->\r\n\t\t\t<!-- (ref 是引用，通过ref可以拿到表单的实例对象（ref的值就是表单的实例对象）) -->\r\n\t\t\t<el-form :model=\"addForm\" :rules=\"addFormRules\" ref=\"addFormRef\" label-width=\"70px\">\r\n\t\t\t\t<el-form-item label=\"用户名\" prop=\"username\">\r\n\t\t\t\t\t<el-input v-model=\"addForm.username\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"密码\" prop=\"password\">\r\n\t\t\t\t\t<el-input v-model=\"addForm.password\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"邮箱\" prop=\"email\">\r\n\t\t\t\t\t<el-input v-model=\"addForm.email\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"手机\" prop=\"mobile\">\r\n\t\t\t\t\t<el-input v-model=\"addForm.mobile\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</el-form>\r\n\r\n\t\t\t<span slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t<el-button @click=\"addDialogVisible = false\">取 消</el-button>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"addUser\">确 定</el-button>\r\n\t\t\t</span>\r\n\t\t</el-dialog>\r\n\r\n\t\t<!-- 修改用户的对话框 -->\r\n\t\t<el-dialog title=\"修改用户信息\" :visible.sync=\"editDialogVisible\" width=\"50%\" @click=\"editDialogClosed\">\r\n\r\n\t\t\t<!-- 内容主体区域 -->\r\n\t\t\t<!--  Form-Item 的 prop 属性设置为需校验的字段名即可 -->\r\n\t\t\t<!-- v-model 数据绑定的值editForm.email是由后台查询的数据决定的 -->\r\n\t\t\t<el-form :model=\"editForm\" :rules=\"editFormRules\" ref=\"editFormRef\" label-width=\"70px\">\r\n\t\t\t\t<el-form-item label=\"用户名\">\r\n\t\t\t\t\t<el-input v-model=\"editForm.username\" disabled></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"邮箱\" prop=\"email\">\r\n\t\t\t\t\t<el-input v-model=\"editForm.email\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"手机\" prop=\"mobile\">\r\n\t\t\t\t\t<el-input v-model=\"editForm.mobile\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</el-form>\r\n\r\n\t\t\t<span slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t<el-button @click=\"editDialogVisible = false\">取 消</el-button>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"editUserInfo\">确 定</el-button>\r\n\t\t\t</span>\r\n\t\t</el-dialog>\r\n\r\n\t\t<!-- 分配角色的对话框 -->\r\n\t\t<el-dialog title=\"分配角色\" :visible.sync=\"setRoleDialogVisible\" width=\"50%\" @close=\"setRoleDialogClosed\">\r\n\t\t\t<div>\r\n\t\t\t\t<p>当前的用户：{{userInfo.username}}</p>\r\n\t\t\t\t<p>当前的角色：{{userInfo.role_name}}</p>\r\n\t\t\t\t<p>分配新角色：\r\n\t\t\t\t\t<el-select v-model=\"selectedRoleId\" placeholder=\"请选择\">\r\n\t\t\t\t\t\t<el-option v-for=\"item in rolesList\" :key=\"item.id\" :label=\"item.roleName\" :value=\"item.id\">\r\n\t\t\t\t\t\t</el-option>\r\n\t\t\t\t\t</el-select>\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\r\n\t\t\t<span slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t<el-button @click=\"setRoleDialogVisible = false\">取 消</el-button>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"saveRoleInfo\">确 定</el-button>\r\n\t\t\t</span>\r\n\t\t</el-dialog>\r\n\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tdata () {\r\n\t\t\t// 自定义检验规则\r\n\t\t\t// （1）验证邮箱的规则\r\n\t\t\tvar checkEmail = (rule, value, callback) => {\r\n\t\t\t\t// 验证邮箱的正则表达式\r\n\t\t\t\tconst regEmail = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\\.[a-zA-Z0-9_-])+/\r\n\t\t\t\tif (regEmail.test(value)) {\r\n\t\t\t\t\t// 合法的邮箱\r\n\t\t\t\t\treturn callback()\r\n\t\t\t\t}\r\n\t\t\t\tcallback(new Error('请输入合法的邮箱'))\r\n\t\t\t}\r\n\r\n\t\t\t// （2）验证手机号的规则\r\n\t\t\tvar checkMobile = (rule, value, callback) => {\r\n\t\t\t\t// 验证手机号的正则表达式\r\n\t\t\t\tconst regMobile = /^(0|86|17951)?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/\r\n\t\t\t\tif (regMobile.test(value)) {\r\n\t\t\t\t\t// 合法的手机号\r\n\t\t\t\t\treturn callback()\r\n\t\t\t\t}\r\n\t\t\t\tcallback(new Error('请输入合法的手机号'))\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\t// 获取用户列表的参数对象\r\n\t\t\t\tqueryInfo: {\r\n\t\t\t\t\tquery: '',\r\n\t\t\t\t\tpagenum: 1,  // 当前的页数\r\n\t\t\t\t\tpagesize: 2   // 当前每页显示多少条数据\r\n\t\t\t\t},\r\n\t\t\t\t// 用户数据列表\r\n\t\t\t\tuserlist: [],\r\n\t\t\t\ttotal: 0,\r\n\r\n\t\t\t\t// 控制添加用户对话框的显示与隐藏\r\n\t\t\t\taddDialogVisible: false,\r\n\r\n\t\t\t\t// 添加用户的表单数据\r\n\t\t\t\taddForm: {\r\n\t\t\t\t\tusername: '',\r\n\t\t\t\t\tpassword: '',\r\n\t\t\t\t\temail: '',\r\n\t\t\t\t\tmobile: ''\r\n\t\t\t\t},\r\n\t\t\t\t// 添加表单的验证规则对象\r\n\t\t\t\taddFormRules: {\r\n\t\t\t\t\tusername: [\r\n\t\t\t\t\t\t{ required: true, message: '请输入用户名', trigger: 'blur' },\r\n\t\t\t\t\t\t{ min: 3, max: 10, message: '用户名的长度在 3 到 10 个字符', trigger: 'blur' }\r\n\t\t\t\t\t],\r\n\t\t\t\t\tpassword: [\r\n\t\t\t\t\t\t{ required: true, message: '请输入密码', trigger: 'blur' },\r\n\t\t\t\t\t\t{ min: 6, max: 15, message: '密码的长度在 6 到 15 个字符', trigger: 'blur' }\r\n\r\n\t\t\t\t\t],\r\n\t\t\t\t\temail: [\r\n\t\t\t\t\t\t{ required: true, message: '请输入邮箱', trigger: 'blur' },\r\n\t\t\t\t\t\t{ validator: checkEmail, triggle: 'blur' }\r\n\t\t\t\t\t],\r\n\t\t\t\t\tmobile: [\r\n\t\t\t\t\t\t{ required: true, message: '请输入手机号', trigger: 'blur' },\r\n\t\t\t\t\t\t{ validator: checkMobile, triggle: 'blur' }\r\n\t\t\t\t\t]\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// 控制修改用户对话框的显示与隐藏\r\n\t\t\t\teditDialogVisible: false,\r\n\t\t\t\t// 查询到的用户信息对象\r\n\t\t\t\teditForm: {},\r\n\t\t\t\t// 修改表单的验证规则对象\r\n\t\t\t\teditFormRules: {\r\n\t\t\t\t\temail: [\r\n\t\t\t\t\t\t{ required: true, message: '请输入用户邮箱', trigger: 'blur' },\r\n\t\t\t\t\t\t{ validator: checkEmail, trigger: 'blur' }\r\n\t\t\t\t\t],\r\n\t\t\t\t\tmobile: [\r\n\t\t\t\t\t\t{ required: true, message: '请输入用户手机', trigger: 'blur' },\r\n\t\t\t\t\t\t{ validator: checkMobile, trigger: 'blur' }\r\n\t\t\t\t\t]\r\n\t\t\t\t},\r\n\t\t\t\t// 控制分配角色对话框的显示与隐藏\r\n\t\t\t\tsetRoleDialogVisible: false,\r\n\t\t\t\t// 需要被分配的角色的用户信息\r\n\t\t\t\tuserInfo: {},\r\n\t\t\t\t// 所有角色的数据列表\r\n\t\t\t\trolesList: [],   //TODO 把数据列表的数组渲染成分配新角色的 下拉菜单\r\n\t\t\t\t// 已选中的角色Id值\r\n\t\t\t\tselectedRoleId: ''\r\n\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\t\tcreated () {\r\n\t\t\tthis.getUserList();\r\n\t\t},\r\n\r\n\t\tmethods: {\r\n\t\t\tasync getUserList () {\r\n\t\t\t\tconst { data: res } = await this.$http.get('users', { params: this.queryInfo })\r\n\t\t\t\tif (res.meta.status !== 200) {\r\n\t\t\t\t\treturn this.$message.error('获取用户列表失败！');\r\n\t\t\t\t}\r\n\t\t\t\tthis.userlist = res.data.users; // 后台响应的用户数据存入用户列表\r\n\t\t\t\tthis.total = res.data.total;   // 后台响应的总记录数存入总数\r\n\t\t\t\tconsole.log(res);\r\n\t\t\t},\r\n\r\n\r\n\t\t\t// 监听 pagesize 改变的事件  当前每页显示多少条数据\r\n\t\t\thandleSizeChange (newSize) {\r\n\t\t\t\t// console.log(newSize)\r\n\t\t\t\tthis.queryInfo.pagesize = newSize;  // 赋值给当前每页显示多少条数据\r\n\t\t\t\tthis.getUserList();  // 重新发送请求获取数据列表\r\n\t\t\t},\r\n\r\n\r\n\t\t\t// 监听 页码值 改变的事件\r\n\t\t\thandleCurrentChange (newPage) {\r\n\t\t\t\t// console.log(newPage)\r\n\t\t\t\tthis.queryInfo.pagenum = newPage;  // 给当前的页码值赋值\r\n\t\t\t\tthis.getUserList();\r\n\t\t\t},\r\n\r\n\r\n\t\t\t// 监听用户状态改变（switch开关）的事件\r\n\t\t\t// 函数形参 ： 用户信息 ，实参 在switch 开关里传入用户信息scope.row    用户状态的布尔值是 scope.row.mg_state。\r\n\t\t\tasync userStateChanged (userinfo) {\r\n\t\t\t\tconsole.log(userinfo) // 开关开启 为 true\r\n\t\t\t\t// 拿到新状态后，发起Ajax请求，调用接口，把状态赋值给服务器\r\n\t\t\t\t// this.$http.put('users/:uId/state/:type')  \r\n\t\t\t\t// 路径要拼接动态参数，可用模板字符串表示\r\n\t\t\t\tconst { data: res } = await this.$http.put(`users/${userinfo.id}/state/${userinfo.mg_state}`)\r\n\t\t\t\tif (res.meta.status !== 200) {\r\n\t\t\t\t\tuserinfo.mg_state = !userinfo.mg_state\r\n\t\t\t\t\treturn this.$message.error('更新用户状态失败！')\r\n\t\t\t\t}\r\n\t\t\t\tthis.$message.success('更新用户状态成功！')\r\n\t\t\t\t// (注意：) $message 是挂载到Vue原型上的属性, 通过 $message 可使用 Message 组件提供的方法\r\n\t\t\t},\r\n\r\n\r\n\t\t\t// 监听添加用户对话框的关闭事件\r\n\t\t\taddDialogClosed () {\r\n\t\t\t\t// resetFields\t对整个表单进行重置，将所有字段值重置为初始值并移除校验结果\r\n\t\t\t\tconsole.log(this);\r\n\t\t\t\tthis.$refs.addFormRef.resetFields() // this.$refs 是定义表单的引用对象，此引用对象就是此组件的实例对象\r\n\t\t\t},\r\n\r\n\r\n\t\t\t// 点击按钮，添加新用户\r\n\t\t\t// 添加用户前的表单预校验\r\n\t\t\taddUser () {\r\n\t\t\t\tthis.$refs.addFormRef.validate(async valid => {\r\n\t\t\t\t\tif (!valid) return\r\n\t\t\t\t\t// 发起添加用户的网络请求\r\n\t\t\t\t\tconst { data: res } = await this.$http.post('users', this.addForm)\r\n\t\t\t\t\tif (res.meta.status !== 201) {\r\n\t\t\t\t\t\tres.$message.error('添加用户失败！')\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.$message.success('添加用户成功！')\r\n\t\t\t\t\t// 隐藏添加用户的对话框\r\n\t\t\t\t\tthis.addDialogVisible = false\r\n\t\t\t\t\t// 重新获取用户列表数据\r\n\t\t\t\t\tthis.getUserList()\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\r\n\t\t\t// 展示编辑用户的对话框\r\n\t\t\t// 根据 id 查询对应的用户信息 形参：id   实参：scope.row.id\r\n\t\t\tasync showEditDialog (id) {\r\n\t\t\t\t// console.log(id)\r\n\t\t\t\t// 调用 根据ID查询用户信息的接口\r\n\t\t\t\tconst { data: res } = await this.$http.get('users/' + id)\r\n\t\t\t\tif (res.meta.status !== 200) {\r\n\t\t\t\t\treturn this.$message.error('查询用户信息失败！')\r\n\t\t\t\t}\r\n\t\t\t\tthis.$message.success('查询用户信息成功！')\r\n\t\t\t\tthis.editForm = res.data;  // 将后台查询到的用户信息赋值给定义的editForm数据\r\n\t\t\t\tthis.editDialogVisible = true  //  显示修改用户信息的对话框\r\n\t\t\t},\r\n\r\n\r\n\t\t\t// 监听修改用户对话框的关闭事件\r\n\t\t\teditDialogClosed () {\r\n\t\t\t\tthis.$refs.editFormRef.resetFields();  // 修改表单用户的重置事件  \r\n\t\t\t},\r\n\r\n\r\n\t\t\t// 修改用户信息并提交\r\n\t\t\teditUserInfo () {\r\n\t\t\t\tthis.$refs.editFormRef.validate(async valid => {\r\n\t\t\t\t\tif (!valid) return\r\n\t\t\t\t\t// 发起修改用户信息的数据请求    users/:id  id是在定义的查询到的用户信息对象editForm中取到的\r\n\t\t\t\t\tconst { data: res } = await this.$http.put('users/' + this.editForm.id, {\r\n\t\t\t\t\t\temail: this.editForm.email,\r\n\t\t\t\t\t\tmobile: this.editForm.mobile\r\n\t\t\t\t\t})\r\n\t\t\t\t\tif (res.meta.status !== 200) {\r\n\t\t\t\t\t\treturn this.$message.error('更新用户信息失败！')\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// 关闭对话框\r\n\t\t\t\t\tthis.editDialogVisible = false\r\n\t\t\t\t\t// 刷新数据列表\r\n\t\t\t\t\tthis.getUserList()\r\n\t\t\t\t\t// 提示修改成功\r\n\t\t\t\t\tthis.$message.success('更新用户信息成功！')\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\r\n\t\t\t// 根据Id删除对应的用户信息\r\n\t\t\tasync removeUserById (id) {\r\n\t\t\t\t// 弹窗询问用户是否删除数据\r\n\t\t\t\tconst confirmResult = await this.$confirm('此操作将永久删除该用户, 是否继续?', '提示', {\r\n\t\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t}).catch(err => err)  // catch() 进行错误捕获(用户取消行为)， return 只有一行，可省略大括号和return\r\n\r\n\t\t\t\t// console.log(confirmResult);\r\n\t\t\t\t// 如果用户\"确认\"删除，则返回值为字符串 confirm\r\n\t\t\t\t// 如果用户\"取消\"了删除，则返回值为字符串 cancel\r\n\t\t\t\tif (confirmResult !== 'confirm') {\r\n\t\t\t\t\treturn this.$message.info('已取消删除')\r\n\t\t\t\t}\r\n\t\t\t\t// 调用API完成删除用户的操作\r\n\t\t\t\tconst { data: res } = await this.$http.delete('users/' + id)\r\n\t\t\t\tif (res.meta.status !== 200) {\r\n\t\t\t\t\treturn this.$message.error('删除用户信息失败！')\r\n\t\t\t\t}\r\n\t\t\t\tthis.$message.success('删除用户成功！')\r\n\t\t\t\tthis.getUserList()\r\n\t\t\t},\r\n\r\n\r\n\t\t\t// 展示分配角色的对话框\r\n\t\t\tasync setRole (userInfo) { // 此处传来的userInfo是scope.row\r\n\t\t\t\tthis.userInfo = userInfo  // 把点击按钮得到的用户信息userInfo保存在需要被分配的角色的用户信息this.userInfo上\r\n\t\t\t\t// console.log(userInfo);\r\n\t\t\t\t// 在展示对话框之前，获取所有角色的列表\r\n\t\t\t\tconst { data: res } = await this.$http.get('roles')\r\n\t\t\t\tif (res.meta.status !== 200) {\r\n\t\t\t\t\treturn this.$message.error('获取角色列表失败！')\r\n\t\t\t\t}\r\n\t\t\t\tthis.rolesList = res.data\r\n\t\t\t\t// console.log(res.data);\r\n\t\t\t\tthis.setRoleDialogVisible = true\r\n\t\t\t},\r\n\r\n\r\n\t\t\t// 点击按钮，分配角色 \r\n\t\t\tasync saveRoleInfo () {\r\n\t\t\t\tif (!this.selectedRoleId) {\r\n\t\t\t\t\treturn this.$message.error('请选择要分配的角色！')\r\n\t\t\t\t}\r\n\t\t\t\t// 发起请求分配用户角色\r\n\t\t\t\tconst { data: res } = await this.$http.put(\r\n\t\t\t\t\t`users/${this.userInfo.id}/role`, { rid: this.selectedRoleId }\r\n\t\t\t\t)\r\n\t\t\t\tif (res.meta.status !== 200) {\r\n\t\t\t\t\treturn this.$message.error('更新角色失败！')\r\n\t\t\t\t}\r\n\t\t\t\tthis.$message.success('更新角色成功！')\r\n\t\t\t\tthis.getUserList()\r\n\t\t\t\tthis.setRoleDialogVisible = false\r\n\t\t\t},\r\n\r\n\r\n\t\t\t// 监听分配角色对话框的关闭事件\r\n\t\t\tsetRoleDialogClosed () {\r\n\t\t\t\tthis.selectedRoleId = ''\r\n\t\t\t\tthis.userInfo = {}\r\n\t\t\t}\r\n\r\n\r\n\t\t}\r\n\t}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Users.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Users.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Users.vue?vue&type=template&id=abe134b6&scoped=true&\"\nimport script from \"./Users.vue?vue&type=script&lang=js&\"\nexport * from \"./Users.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"abe134b6\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","path","_v","rightsList","scopedSlots","_u","key","fn","scope","row","level","staticRenderFns","data","created","methods","component","rolelist","_l","item1","i1","id","class","on","$event","removeRightById","_s","authName","staticClass","item2","i2","item3","showSetRightDialog","setRightDialogVisible","setRightDialogClosed","ref","rightslist","treeProps","defKeys","slot","allotRights","label","children","roleId","confirmButtonText","cancelButtonText","type","catch","err","role","getLeafKeys","node","rids","getUserList","model","value","queryInfo","callback","$$v","$set","expression","addDialogVisible","userlist","userStateChanged","showEditDialog","removeUserById","setRole","pagenum","pagesize","total","handleSizeChange","handleCurrentChange","addDialogClosed","addForm","addFormRules","addUser","editDialogVisible","editDialogClosed","editForm","editFormRules","editUserInfo","setRoleDialogVisible","setRoleDialogClosed","userInfo","username","role_name","selectedRoleId","item","roleName","saveRoleInfo","query","password","email","mobile","required","message","trigger","min","max","validator","triggle","rolesList","params","userinfo","res","rid"],"sourceRoot":""}